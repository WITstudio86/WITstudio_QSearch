# 工具及开发环境

## 使用模版

基于 github repo作为模版生成项目模版的工具 , 安装 cargo-generate 工具
```shell
$ cargo install cargo-generate 
```
使用模版文件
```shell
$ cargo generate WITstudio86/rust-template
```
> 下载的工具存储在 `~/.cargo/bin` 

## 环境准备

### pre-commit

pre-commit 代码检查工具 , 执行预定的指令对代码进行检查 , 安装方式:

```shell
brew install pre-commit
pipx install pre-commit
```

创建一个项目之后需要先使用 `pre-commit install` 进行初始化

### cargo deny

cargo deny 项目检查工具用于检查依赖安全性 , 防止依赖保护性授权的代码

```shell
cargo install --locked cargo-deny
```

> allow字段设置允许的授权


### typos

typos 进行拼写检查

```shell
cargo install typos-cli
```

> `_typos.toml`是其配置文件 其中的 extend-exclude字段排除不需要检查的文件


### cliff
git cliff 生成 changelog 文件,描述不同 git 版本做的事情

```shell
cargo install git-cliff
```
> cliff.toml是其配置文件 修改postprocessors 里面的 replace 为自己的仓库路径


### nextest

cargo nextext , 增强的测试工具
```shell
cargo install --locked cargo-nextest 
```


### github action

`.github/weorflows/build.yaml`  是一个 github action , 在提交的时候做做一些检查
jobs 中进行描述
```yaml
build-rust:
	startrgy:
		matrix:
			platform: [需要检查的平台 , ubuntu-latest]
	具体检查步骤
```


## 编译结果地址的改变

需要创建并修改`~/.cargo/config.toml` 

```toml
[build]
target-dir = "/Users/wuzexian/codes/.target"

```
把所有编译结果编译到指定目录 , 便于清理



## git 相关

- git commit -a
	- 用于将所有已经跟踪的文件的更改提交到本地仓库。这个命令的意思是自动暂存所有修改过的文件，然后进行提交。
- git diff   
	- 查看具体的变化内容
- git switch -c branchname
	- 切换到新的分支
	- 正常工作中 , 提交到分支中, 因为主分支通常会被保护起来 , 在检查通过之后 code review 的人可以在 code change 中检查改动的代码 , 基础检查已经在提交前和 github action 中进行过了, code review 的时候应该检查架构 , 接口设计 , 代码质量 , 错误处理, 可维护性 , 和团队特定的实践
	- squash merging 这种 pr 的 merge 方式会将当前 pr(pull request)合并成一个提交 merge 到主分支中